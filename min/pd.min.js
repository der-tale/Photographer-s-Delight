(function(){var e,c=function(a,b){return function(){return a.apply(b,arguments)}};e=function(){function a(b){this._loadingFinished=c(this._loadingFinished,this);b=b?b:{};this.options=_.defaults(b,{preloadCount:5,parallelLoadCount:1,images:[]});this.loadingList=[];this.loadingWaitList=[];this._startLoading()}a.prototype.options={};a.prototype.images=[];a.prototype.imageMap=[];a.prototype.loadingList=[];a.prototype.loadingWaitList=[];a.prototype.getImageCount=function(){return this.options.images.length};
a.prototype.getImage=function(b,a){var d,c,g,e,f;f=this.options.preloadCount>2?Math.floor(this.options.preloadCount/2):0;f=this.options.preloadCount%2===0?f-1:f;d=(d=b-f)>=0?d:0;g=(g=b+this.options.preloadCount-f)<this.imageMap.length?g:this.imageMap.length-1;c=d;this.loadingWaitList.push(function(){var d;for(d=[];c<=g;){e=this.imageMap[c];if(c===b){if(e.callback==null)e.callback=a}else if(e.callback==null)e.callback=this.options.standardCallback;c+=1;d.push(e)}return d}.call(this));this.loadingWaitList=
_.flatten(this.loadingWaitList);this.loadingWaitList=_.uniq(this.loadingWaitList);return this._workOnLoadingList()};a.prototype._startLoading=function(){var b;return this.imageMap=function(){var a,d,c,e;c=this.options.images;e=[];a=0;for(d=c.length;a<d;a++)b=c[a],e.push({finished:!1,image:null,url:b,index:_.indexOf(this.options.images,b)});return e}.call(this)};a.prototype._workOnLoadingList=function(){var b,a;if(this.loadingWaitList.length>=1&&this.loadingList.length<this.options.parallelLoadCount)if(b=
this.loadingWaitList[0],this.loadingWaitList=_.without(this.loadingWaitList,b),b.finished)return this._loadingFinished(b);else if(this.loadingList.push(b),a=new Image,b.image=a,a.src="",jQuery(a).load(_.bind(this._loadingFinished,this,b)),a.src=b.url,this.loadingList.length<this.options.parallelLoadCount)return this._workOnLoadingList()};a.prototype._loadingFinished=function(b){this.loadingList=_.without(this.loadingList,b);b.finished=!0;b.image=$(b.image);b!=null&&typeof b.callback==="function"&&
b.callback(this.imageMap.indexOf(b),b);b.callback=null;return this._workOnLoadingList()};return a}();(typeof exports!=="undefined"&&exports!==null?exports:this).ImageReader=e}).call(this);(function(){var e,c=function(a,b){return function(){return a.apply(b,arguments)}};e=function(){function a(b){this._animateFinished=c(this._animateFinished,this);this._display=c(this._display,this);this._addImage=c(this._addImage,this);this.previous=c(this.previous,this);this.next=c(this.next,this);b=b?b:{};this.options=_.defaults(b,{imageReader:null,viewport:null,viewportDimensions:{height:-1,width:-1},centerImagesInViewport:!0,fitImagesToViewPort:!1,events:{click:function(){}},duration:500});this.queue=
[];this.images=[];this.currentImage=-1;this._init()}a.prototype.options={};a.prototype.queue=[];a.prototype.images=[];a.prototype.currentImage=-1;a.prototype.animationInProgress=!1;a.prototype.display=function(b,a){var d;this.images[b]?this._display(b):this.options.imageReader.getImage(b,this._addImage);if(!(a!=null&&a.overrideEvents)||a.overrideEvents===!1)return(d=this.options.events)!=null?typeof d.display==="function"?d.display(b):void 0:void 0};a.prototype.next=function(){return this.currentImage+
1<this.imageCount?this.display(this.currentImage+1):this.display(0)};a.prototype.previous=function(){return this.currentImage>0?this.display(this.currentImage-1):this.display(this.imageCount-1)};a.prototype._init=function(){this.imageCount=this.options.imageReader.getImageCount();this.options.events.click&&this.options.viewport.click(this.options.events.click);return this.display(0,{overrideEvents:!0})};a.prototype._addImage=function(b,a){this.images[b]=a;this._insertImage(a);this.options.fitImagesToViewPort&&
this._fitImage(a);this._centerImage(a);return this._display(b)};a.prototype._display=function(b){this.queue.push(b);return this._animate()};a.prototype._insertImage=function(b){this.options.viewport.append(b.image);b.image.hide();return b.image.css({opacity:0})};a.prototype._imageDimensions=function(b){return{x:b.width(),y:b.height()}};a.prototype._calculateEnlargementFactor=function(b,a,d){return b[d]/a[d]};a.prototype._fitImage=function(b){var a,d,c,e;e=this._imageDimensions(this.options.viewport);
d=this._imageDimensions(b.image);a=d.x>=e.x?"x":d.y>e.y?"y":d.x>=d.y?"x":"y";c=a==="x"?"y":"x";a=this._calculateEnlargementFactor(e,d,a);NaN*d[c]>e[c]&&this._calculateEnlargementFactor(e,d,c);return b.image.css({width:Math.round(d.x*a),height:Math.round(d.y*a)})};a.prototype.calculateOffset=function(b,a,d){return Math.floor((b[d]-a[d])/2)};a.prototype._centerImage=function(b){var a,d;d=this._imageDimensions(this.options.viewport);a=this._imageDimensions(b.image);return b.image.css({position:"absolute",
left:this.calculateOffset(d,a,"x"),top:this.calculateOffset(d,a,"y")})};a.prototype._animate=function(){var b;if(!(this.animationInProgress||this.queue.length===0))return this.animationInProgress=!0,b=this.queue[0],this.queue=_.without(this.queue,b),b===this.currentImage?this._animateFinished():(this.currentImage>-1&&this.images[this.currentImage].image.animate({opacity:0},this.options.duration),this.images[b].image.show(),this.images[b].image.animate({opacity:1,useTranslate3d:!0},this.options.duration,
this._animateFinished),this.currentImage=b)};a.prototype._animateFinished=function(){var b;b=this;return window.setTimeout(function(){b.animationInProgress=!1;if(b.queue.length>0)return b._animate()},100)};return a}();(typeof exports!=="undefined"&&exports!==null?exports:this).ImageFader=e}).call(this);(function(){var e,c=function(a,b){return function(){return a.apply(b,arguments)}};e=function(){function a(b){this.next=c(this.next,this);this.previous=c(this.previous,this);b=b?b:{};this.options=_.defaults(b,{container:null,imageReader:null,text:{previous:"<",next:">"},css:{selected:"selected"},events:{display:null}});this.nextLink=this.previousLink=null;this.indexLinks=[];this.currentImage=-1;this._init()}a.prototype.options={};a.prototype.previousLink=null;a.prototype.nextLink=null;a.prototype.indexLinks=
[];a.prototype.currentImage=-1;a.prototype.templates={link:"<a href='javascript:;'></a>"};a.prototype.display=function(b,a){var d;this.indexLinks[b].toggleClass(this.options.css.selected);this.currentImage>-1&&this.indexLinks[this.currentImage].toggleClass(this.options.css.selected);this.currentImage=b;if(!(a!=null&&a.overrideEvents)||a.overrideEvents===!1)return(d=this.options.events)!=null?typeof d.display==="function"?d.display(b):void 0:void 0};a.prototype.previous=function(){return this.currentImage>
0?this.display(this.currentImage-1):this.display(this.imageCount-1)};a.prototype.next=function(){return this.currentImage+1<this.imageCount?this.display(this.currentImage+1):this.display(0)};a.prototype._init=function(){var b,a,d,c;this.imageCount=this.options.imageReader.getImageCount();this.previousLink=$(this.templates.link);this.options.container.append(this.previousLink.text(this.options.text.previous));b=0;for(a=this.imageCount-1;0<=a?b<=a:b>=a;0<=a?b++:b--)this.indexLinks[b]=$(this.templates.link),
this.options.container.append(this.indexLinks[b].text(b+1));this.nextLink=$(this.templates.link);this.options.container.append(this.nextLink.text(this.options.text.next));this.previousLink.click(this.previous);this.nextLink.click(this.next);c=this.indexLinks;a=0;for(d=c.length;a<d;a++)b=c[a],b.click(_.bind(this.display,this,this.indexLinks.indexOf(b)));return this.display(0,{overrideEvents:!0})};return a}();(typeof exports!=="undefined"&&exports!==null?exports:this).ImagePagination=e}).call(this);(function(){var e;e=function(){function c(a){a=a?a:{};this.options=_.defaults(a,{captions:[],container:null,duration:500});this.options.container=$(this.options.container);this.currentCaption=-1;this.captions=[];this._init()}c.prototype.options={};c.prototype.currentCaption=-1;c.prototype.captions=[];c.prototype.templates={captionContainer:"<div></div>"};c.prototype.display=function(a){var b,c;b=this.captions[a];(c=this.captions[this.currentCaption])&&c.animate({opacity:0},this.options.duration);
b.animate({opacity:1,useTranslate3d:!0},this.options.duration);return this.currentCaption=a};c.prototype._init=function(){var a;this.captions=function(){var b,c,d,e;d=this.options.captions;e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push($(this.templates.captionContainer).text(a).attr("id",this.options.captions.indexOf(a)).css({position:"absolute",opacity:0}).appendTo(this.options.container));return e}.call(this);return this.display(0)};return c}();(typeof exports!=="undefined"&&exports!==null?exports:
this).ImageCaption=e}).call(this);(function(){var e,c=function(a,b){return function(){return a.apply(b,arguments)}};e=function(){function a(a){this._tick=c(this._tick,this);this._toggle=c(this._toggle,this);this.stop=c(this.stop,this);this.start=c(this.start,this);a=a?a:{};this.options=_.defaults(a,{container:null,state:!1,interval:3E3,text:{stop:"pause",start:"play"},events:{tick:null}});this.state=!1;this.toggleLink=null;this._init()}a.prototype.options={};a.prototype.state=!1;a.prototype.toggleLink=null;a.prototype.templates={link:"<a href='javascript:;'></a>"};
a.prototype.start=function(){if(this.state===!1)return this.state=!0,this._start};a.prototype.stop=function(){if(this.state===!0)return this.state=!1,this._stop};a.prototype._init=function(){if(this.options.container)this.toggleLink=$(this.templates.link),this.options.container.append(this.toggleLink),this.toggleLink.click(this._toggle);window.setInterval(this._tick,this.options.interval);this.state=this.options.state;return this.state===!0?this._start():this._stop()};a.prototype._toggle=function(){this.state=
!this.state;return this.state===!0?this._start():this._stop()};a.prototype._start=function(){if(this.toggleLink)return this.toggleLink.text(this.options.text.stop)};a.prototype._stop=function(){if(this.toggleLink)return this.toggleLink.text(this.options.text.start)};a.prototype._tick=function(){var a,c;if(this.state)return(a=this.options)!=null?(c=a.events)!=null?typeof c.tick==="function"?c.tick():void 0:void 0:void 0};return a}();(typeof exports!=="undefined"&&exports!==null?exports:this).Interval=
e}).call(this);
