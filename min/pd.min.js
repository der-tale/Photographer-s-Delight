(function(){var e,c=function(a,b){return function(){return a.apply(b,arguments)}};e=function(){function a(b){this._loadingFinished=c(this._loadingFinished,this);b=b?b:{};this.options=_.defaults(b,{preloadCount:5,parallelLoadCount:1,images:[]});this.loadingList=[];this.loadingWaitList=[];this._startLoading()}a.name="ImageReader";a.prototype.options={};a.prototype.images=[];a.prototype.imageMap=[];a.prototype.loadingList=[];a.prototype.loadingWaitList=[];a.prototype.getImageCount=function(){return this.options.images.length};
a.prototype.getImage=function(b,a){var d,c,f;f=2<this.options.preloadCount?Math.floor(this.options.preloadCount/2):0;f=0===this.options.preloadCount%2?f-1:f;d=0<=(d=b-f)?d:0;c=(c=b+this.options.preloadCount-f)<this.imageMap.length?c:this.imageMap.length-1;var e;for(e=[];d<=c;)f=this.imageMap[d],d===b?null==f.callback&&(f.callback=a):null==f.callback&&(f.callback=this.options.standardCallback),d+=1,e.push(f);this.loadingWaitList.push(e);this.loadingWaitList=_.flatten(this.loadingWaitList);this.loadingWaitList=
_.uniq(this.loadingWaitList);return this._workOnLoadingList()};a.prototype._startLoading=function(){var b,a,d,c,f;c=this.options.images;f=[];a=0;for(d=c.length;a<d;a++)b=c[a],f.push({finished:!1,image:null,url:b,index:_.indexOf(this.options.images,b)});return this.imageMap=f};a.prototype._workOnLoadingList=function(){var b,a;if(1<=this.loadingWaitList.length&&this.loadingList.length<this.options.parallelLoadCount){b=this.loadingWaitList[0];this.loadingWaitList=_.without(this.loadingWaitList,b);if(b.finished)return this._loadingFinished(b);
this.loadingList.push(b);a=new Image;b.image=a;a.src="";jQuery(a).load(_.bind(this._loadingFinished,this,b));a.src=b.url;if(this.loadingList.length<this.options.parallelLoadCount)return this._workOnLoadingList()}};a.prototype._loadingFinished=function(b){this.loadingList=_.without(this.loadingList,b);b.finished=!0;b.image=$(b.image);null!=b&&"function"===typeof b.callback&&b.callback(_.indexOf(this.imageMap,b),b);b.callback=null;return this._workOnLoadingList()};return a}();("undefined"!==typeof exports&&
null!==exports?exports:this).ImageReader=e}).call(this);(function(){var e,c=function(a,b){return function(){return a.apply(b,arguments)}};e=function(){function a(b){this._animateFinished=c(this._animateFinished,this);this._display=c(this._display,this);this._addImage=c(this._addImage,this);this.previous=c(this.previous,this);this.next=c(this.next,this);b=b?b:{};this.options=_.defaults(b,{imageReader:null,viewport:null,viewportDimensions:{height:-1,width:-1},centerImagesInViewport:!0,fitImagesToViewPort:!1,events:{click:function(){}},duration:500});this.queue=
[];this.images=[];this.currentImage=-1;this._init()}a.name="ImageFader";a.prototype.options={};a.prototype.queue=[];a.prototype.images=[];a.prototype.currentImage=-1;a.prototype.animationInProgress=!1;a.prototype.display=function(b,a){var d;this.images[b]?this._display(b):this.options.imageReader.getImage(b,this._addImage);if(!(null!=a&&a.overrideEvents)||!1===a.overrideEvents)return null!=(d=this.options.events)?"function"===typeof d.display?d.display(b):void 0:void 0};a.prototype.next=function(){return this.currentImage+
1<this.imageCount?this.display(this.currentImage+1):this.display(0)};a.prototype.previous=function(){return 0<this.currentImage?this.display(this.currentImage-1):this.display(this.imageCount-1)};a.prototype._init=function(){this.imageCount=this.options.imageReader.getImageCount();this.options.events.click&&this.options.viewport.click(this.options.events.click);return this.display(0,{overrideEvents:!0})};a.prototype._addImage=function(b,a){this.images[b]=a;this._insertImage(a);this.options.fitImagesToViewPort&&
this._fitImage(a);this._centerImage(a);return this._display(b)};a.prototype._display=function(b){this.queue.push(b);return this._animate()};a.prototype._insertImage=function(b){this.options.viewport.append(b.image);b.image.hide();return b.image.css({opacity:0})};a.prototype._imageDimensions=function(b){return{x:b.width(),y:b.height()}};a.prototype._calculateEnlargementFactor=function(b,a,d){return b[d]/a[d]};a.prototype._fitImage=function(b){var a,d,c,f;f=this._imageDimensions(this.options.viewport);
d=this._imageDimensions(b.image);a=d.x>=f.x?"x":d.y>f.y?"y":d.x>=d.y?"x":"y";c="x"===a?"y":"x";a=this._calculateEnlargementFactor(f,d,a);a*parseInt(d[c])>f[c]&&(a=this._calculateEnlargementFactor(f,d,c));c=Math.round(d.x*a);d=Math.round(d.y*a);return b.image.css({width:c,height:d})};a.prototype.calculateOffset=function(b,a,d){return Math.floor((b[d]-a[d])/2)};a.prototype._centerImage=function(b){var a,d;d=this._imageDimensions(this.options.viewport);a=this._imageDimensions(b.image);return b.image.css({position:"absolute",
left:this.calculateOffset(d,a,"x"),top:this.calculateOffset(d,a,"y")})};a.prototype._animate=function(){var a;if(!(this.animationInProgress||0===this.queue.length)){this.animationInProgress=!0;a=this.queue[0];this.queue=_.without(this.queue,a);if(a===this.currentImage)return this._animateFinished();-1<this.currentImage&&this.images[this.currentImage].image.animate({opacity:0},this.options.duration);this.images[a].image.show();this.images[a].image.animate({opacity:1,useTranslate3d:!0},this.options.duration,
this._animateFinished);return this.currentImage=a}};a.prototype._animateFinished=function(){var a;a=this;return window.setTimeout(function(){a.animationInProgress=!1;if(0<a.queue.length)return a._animate()},100)};return a}();("undefined"!==typeof exports&&null!==exports?exports:this).ImageFader=e}).call(this);(function(){var e,c=function(a,b){return function(){return a.apply(b,arguments)}};e=function(){function a(a){this.next=c(this.next,this);this.previous=c(this.previous,this);a=a?a:{};this.options=_.defaults(a,{container:null,imageReader:null,text:{previous:"<",next:">"},css:{selected:"selected"},events:{display:null}});this.nextLink=this.previousLink=null;this.indexLinks=[];this.currentImage=-1;this._init()}a.name="ImagePagination";a.prototype.options={};a.prototype.previousLink=null;a.prototype.nextLink=
null;a.prototype.indexLinks=[];a.prototype.currentImage=-1;a.prototype.templates={link:"<a href='javascript:;'></a>"};a.prototype.display=function(a,c){var d;this.indexLinks[a].toggleClass(this.options.css.selected);-1<this.currentImage&&this.indexLinks[this.currentImage].toggleClass(this.options.css.selected);this.currentImage=a;if(!(null!=c&&c.overrideEvents)||!1===c.overrideEvents)return null!=(d=this.options.events)?"function"===typeof d.display?d.display(a):void 0:void 0};a.prototype.previous=
function(){return 0<this.currentImage?this.display(this.currentImage-1):this.display(this.imageCount-1)};a.prototype.next=function(){return this.currentImage+1<this.imageCount?this.display(this.currentImage+1):this.display(0)};a.prototype._init=function(){var a,c,d,e;this.imageCount=this.options.imageReader.getImageCount();this.previousLink=$(this.templates.link);this.options.container.append(this.previousLink.text(this.options.text.previous));a=c=0;for(d=this.imageCount-1;0<=d?c<=d:c>=d;a=0<=d?++c:
--c)this.indexLinks[a]=$(this.templates.link),this.options.container.append(this.indexLinks[a].text(a+1));this.nextLink=$(this.templates.link);this.options.container.append(this.nextLink.text(this.options.text.next));this.previousLink.click(this.previous);this.nextLink.click(this.next);e=this.indexLinks;c=0;for(d=e.length;c<d;c++)a=e[c],a.click(_.bind(this.display,this,_.indexOf(this.indexLinks,a)));return this.display(0,{overrideEvents:!0})};return a}();("undefined"!==typeof exports&&null!==exports?
exports:this).ImagePagination=e}).call(this);(function(){var e;e=function(){function c(a){a=a?a:{};this.options=_.defaults(a,{captions:[],container:null,duration:500});this.options.container=$(this.options.container);this.currentCaption=-1;this.captions=[];this._init()}c.name="ImageCaption";c.prototype.options={};c.prototype.currentCaption=-1;c.prototype.captions=[];c.prototype.templates={captionContainer:"<div></div>"};c.prototype.display=function(a){var b,c;if(this.currentCaption!==a)return b=this.captions[a],(c=this.captions[this.currentCaption])&&
c.animate({opacity:0},this.options.duration,function(){return c.hide()}),b.show(),b.animate({opacity:1,useTranslate3d:!0},this.options.duration),this.currentCaption=a};c.prototype._init=function(){var a,b,c,d,e;d=this.options.captions;e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push($(this.templates.captionContainer).html(a).attr("id",_.indexOf(this.options.captions,a)).css({position:"absolute",opacity:0,display:"none"}).appendTo(this.options.container));this.captions=e;return this.display(0)};return c}();
("undefined"!==typeof exports&&null!==exports?exports:this).ImageCaption=e}).call(this);(function(){var e,c=function(a,b){return function(){return a.apply(b,arguments)}};e=function(){function a(a){this._tick=c(this._tick,this);this._toggle=c(this._toggle,this);this.stop=c(this.stop,this);this.start=c(this.start,this);a=a?a:{};this.options=_.defaults(a,{container:null,state:!1,interval:3E3,toggleMarkup:$("<a>").attr("href","javascript:;"),text:{stop:"pause",start:"play"},events:{tick:null}});this.state=!1;this.toggleLink=null;this._init()}a.name="Interval";a.prototype.options={};a.prototype.state=
!1;a.prototype.toggleLink=null;a.prototype.start=function(){if(!1===this.state)return this.state=!0,this._start};a.prototype.stop=function(){if(!0===this.state)return this.state=!1,this._stop};a.prototype._init=function(){this.options.container&&(this.toggleLink=this.options.toggleMarkup,this.options.container.append(this.toggleLink),this.toggleLink.click(this._toggle));window.setInterval(this._tick,this.options.interval);this.state=this.options.state;return!0===this.state?this._start():this._stop()};
a.prototype._toggle=function(){this.state=!this.state;return!0===this.state?this._start():this._stop()};a.prototype._start=function(){if(this.toggleLink)return this.toggleLink.text(this.options.text.stop)};a.prototype._stop=function(){if(this.toggleLink)return this.toggleLink.text(this.options.text.start)};a.prototype._tick=function(){var a,c;if(this.state)return null!=(a=this.options)?null!=(c=a.events)?"function"===typeof c.tick?c.tick():void 0:void 0:void 0};return a}();("undefined"!==typeof exports&&
null!==exports?exports:this).Interval=e}).call(this);
